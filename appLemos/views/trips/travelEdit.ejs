<!-- registro viagens -->
<%- include("../partials/header.ejs")%>
  <%- include("../partials/navbar.ejs")%>

    <div class="container mt-4">

      <h3>editarDados</h3>

      <form action="/trips/update" method="post">
        <!-- CLIENTE -->
        <div class="form-group m-0">
          <div>
            <label for="cliente">Cliente:</label>
            <input type="text" required name="cliente" class="form-control verificar" id="cliente"
              placeholder="Adicione o nome" value="<%= trips.cliente %>">
          </div><br>
          <!-- <span class="editavel spanError">O campo deve ter no minimo 3 caracteres</span> -->
        </div>

        <!-- ENDEREÇO -->
        <div class="form-group m-0">
          <div>
            <label for="endereco">Endereço:</label>
            <input type="text" required name="endereco" class="form-control verificar" id="endereco"
              placeholder="Adicione o endereço" value="<%= trips.endereco %>">
          </div><br>
          <!-- <span class="editavel spanError">O campo deve ter no minimo 3 caracteres</span> -->
        </div>

        <div class="d-flex flex-wrap m-auto">
          <!-- MATERIAL -->
          <div class="form-group mr-3" style="width: 205px;">
            <label for="material">Material:</label>
            <select class="form-control verificar" required name="material" id="material">
              <option selected></option>
              <option>Areia Fina</option>
              <option>Areia Media</option>
              <option>Areia Grossa</option>
              <option>Brita 0</option>
              <option>Brita 1</option>
              <option>Brita 2</option>
            </select>
          </div>
          <!-- QUANTIDADE -->
          <div class="form-group mr-3">
            <label for="quantidade">Quantidade:</label>
            <input type="number" style="width: 205px;" required name="quantidade" class="form-control verificar"
              id="quantidade" placeholder="0,000" value="<%= trips.quantidade %>">
          </div>
          <!-- PREÇO UNITARIO -->
          <div class="form-group mr-3">
            <label for="precoUnitario">Preço Unitario:</label>
            <input type="number" style="width: 205px;" required name="precoUnitario" class="form-control verificar"
              id="precoUnitario" placeholder="R$ 0,000" value="<%= trips.precoUnitario %>">
          </div>
          <!-- VALOR TOTAL -->
          <div class="form-group mr-3">
            <label for="valorTotal">Valor Total:</label>
            <input type="number" style="width: 205px;" name="valorTotal" class="form-control" id="valorTotal"
              value="<%= trips.valorTotal %>">
          </div>
          <!-- VENDEDOR -->
          <div class="form-group mr-3" style="width: 205px;">
            <label for="vendedor">Vendedor:</label>
            <select class="form-control verificar" required name="vendedor" id="vendedor">
              <option selected></option>
              <option>Caique</option>
              <option>Paulo Thiago</option>
              <option>Marcus Paulo</option>
              <option>Celio de Paula</option>
            </select>
          </div>
          <!-- FORMA PAGAMENTO -->
          <div class="form-group mr-3" style="width: 205px;">
            <label for="formaPagamento">Forma Pagamento:</label>
            <select class="form-control verificar" required name="formaPagamento" id="formaPagamento">
              <option selected></option>
              <option>Dinheiro</option>
              <option>Cartão Credito</option>
              <option>Cartão Debito</option>
              <option>Pix</option>
            </select>
          </div>
          <!-- TELEFONE -->
          <div class="form-group mr-3">
            <label for="telefone">Telefone:</label>
            <input type="tel" style="width: 205px;" required class="form-control verificar" name="telefone"
              id="telefone" placeholder="(00)-0-0000-0000 " value="<%= trips.telefone %>">
          </div>
        </div>
        <div class="mt-3 d-flex justify-content-between ">
          <!-- <h3 class="">Valor Total: R$ <span id="resultado">0,00</span></h3> -->
          <input type="hidden" name="id" value="<%= trips.id %>">
          <a href="/trips/list" class="btn btn-outline-primary btn-sm">Lista Clientes</a>
          <button id="botao" type="submit" class="btn btn-warning btn-sm text-white ml-auto">Editar Dados</button>
        </div>
      </form>
    </div>
    <script>
      // setInterval(() => {
      //   let quantidade = document.querySelector('#quantidade')
      //   let precoUnitario = document.querySelector('#precoUnitario')
      //   let valorTotal = document.querySelector('#valorTotal')
      //   let quantidadeTotal = quantidade.value
      //   let precoUnitarioTotal = precoUnitario.value
      //   let q = quantidadeTotal.replace(',', '.')
      //   let p = precoUnitarioTotal.replace(',', '.')
      //   let res = q * p
      //   console.log(res)
      //   valorTotal.value = res.toFixed(2)
      // })
      let quantidade = document.querySelector('#quantidade').addEventListener("input", valorTotal)
      let precoUnitario = document.querySelector('#precoUnitario').addEventListener("input", valorTotal)

      function valorTotal() {
        let quantidade = document.querySelector('#quantidade')
        let precoUnitario = document.querySelector('#precoUnitario')
        let valorTotal = document.querySelector('#valorTotal')
        let quantidadeTotal = +quantidade.value
        let precoUnitarioTotal = +precoUnitario.value
        let res = quantidadeTotal * precoUnitarioTotal
        valorTotal.value = parseInt(res).toFixed(2)
      }

    </script>
    <br><br>
    <%- include("../partials/footer")%>